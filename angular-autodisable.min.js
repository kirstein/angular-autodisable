/* 
 * angular-autodisable 0.0.1
 * http://github.com/kirstein/angular-autodisable
 * 
 * Licensed under the MIT license
 */
!function(a){"use strict";return a.module("ngAutodisable",[]).directive("ngAutodisable",["$parse",function(b){function c(b){return b&&a.isFunction(b.then)&&a.isFunction(b["finally"])}function d(a,b){var c=a[n];return c.splice(c.indexOf(b),1),a.$set(n,c),c}function e(a){var b=p++;return a.$set(n,(a[n]||[]).concat(b)),b}function f(a,b,c){(c||!d(a,b).length)&&a.$set(m,c,!0)}function g(b,c,e){if(e||!d(b,c).length){var f=a.element(o).find("button[type=submit]");f.attr(m,!!e)}}function h(a,b,c){l.disableFn(b,c,!0),a["finally"](function(){l.disableFn(b,c)})}function i(a,b,d){var f=d(a,{$event:l.EVENT});c(f)&&h(f,b,e(b))}function j(a,b,c,d){c.unbind(l.EVENT).bind(l.EVENT,function(){b.$apply(function(){a.forEach(i.bind(null,b,d))})})}var k={click:{EVENT:"click",attrName:"ngClick",disableFn:f},submit:{EVENT:"submit",attrName:"ngSubmit",disableFn:g}},l=k.click,m="disabled",n="ngAutodisable",o=null,p=0;return{restrict:"A",compile:function(a,c){if(o=a,c.hasOwnProperty("ngClick"))l=k.click;else{if(!c.hasOwnProperty("ngSubmit"))throw new Error("ngAutodisable requires ngClick or ngSubmit attribute in order to work");l=k.submit}var d=c[l.attrName].split(";").map(b);return j.bind(null,d)}}}])}(angular);